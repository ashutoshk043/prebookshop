<app-sidebar #sidebar></app-sidebar>

<div class="main-content" [class.sidebar-collapsed]="sidebar.isCollapsed">
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-12">
                <div class="card border-0 shadow-sm p-4 rounded-4 position-relative w-100">
                    <h3 class="text-center mb-4">Register User</h3>

                    <!-- Close Button -->
                    <button type="button" class="btn-close position-absolute top-0 end-0 m-3" aria-label="Close"
                        (click)="onClose()"></button>

                    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="w-100">
                        <div class="row g-3">
                            <!-- Full Name -->
                            <div class="col-md-6 col-lg-4">
                                <label for="name" class="form-label">Full Name</label>
                                <input type="text" id="name" class="form-control" placeholder="Enter full name"
                                    formControlName="name" />
                                <small class="text-danger"
                                    *ngIf="registerForm.get('name')?.touched && registerForm.get('name')?.invalid">
                                    Name is required (min 3 characters)
                                </small>
                            </div>

                            <!-- Email -->
                            <div class="col-md-6 col-lg-4">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" id="email" class="form-control" placeholder="Enter email address"
                                    formControlName="email" />
                                <small class="text-danger"
                                    *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid">
                                    Valid email is required
                                </small>
                            </div>

                            <!-- Phone -->
                            <div class="col-md-6 col-lg-4">
                                <label for="phone" class="form-label">Mobile Number</label>
                                <input type="tel" id="phone" class="form-control" placeholder="Enter mobile number"
                                    formControlName="phone" />
                                <small class="text-danger"
                                    *ngIf="registerForm.get('phone')?.touched && registerForm.get('phone')?.invalid">
                                    Valid 10-digit mobile number required
                                </small>
                            </div>

                            <!-- Password -->
                            <div class="col-md-6 col-lg-4">
                                <label for="password" class="form-label">Password</label>
                                <input type="password" id="password" class="form-control" placeholder="Enter password"
                                    formControlName="password" />
                            </div>

                            <!-- Confirm Password -->
                            <div class="col-md-6 col-lg-4">
                                <label for="confirmPassword" class="form-label">Confirm Password</label>
                                <input type="password" id="confirmPassword" class="form-control"
                                    placeholder="Confirm password" formControlName="confirmPassword" />
                            </div>

                            <!-- State -->
                            <div class="col-md-6 col-lg-4">
                                <label for="state" class="form-label">State</label>
                                <select id="state" class="form-select" formControlName="state">
                                    <option value="">Select state</option>
                                    <option value="MH">Maharashtra</option>
                                    <option value="DL">Delhi</option>
                                    <option value="RJ">Rajasthan</option>
                                    <option value="UP">Uttar Pradesh</option>
                                </select>
                            </div>

                            <!-- District -->
                            <div class="col-md-6 col-lg-4">
                                <label for="district" class="form-label">District</label>
                                <select id="district" class="form-select" formControlName="district">
                                    <option value="">Select district</option>
                                    <option value="NGP">Nagpur</option>
                                    <option value="PUN">Pune</option>
                                    <option value="JPR">Jaipur</option>
                                    <option value="ND">New Delhi</option>
                                </select>
                            </div>

                            <!-- Block -->
                            <div class="col-md-6 col-lg-4">
                                <label for="block" class="form-label">Block / Sub-District</label>
                                <select id="block" class="form-select" formControlName="block">
                                    <option value="">Select block</option>
                                    <option value="b1">Block 1</option>
                                    <option value="b2">Block 2</option>
                                    <option value="b3">Block 3</option>
                                </select>
                            </div>

                            <!-- Status -->
                            <div class="col-md-6 col-lg-4">
                                <label for="status" class="form-label">Status</label>
                                <select id="status" class="form-select" formControlName="status">
                                    <option value="">Select status</option>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                    <option value="suspended">Suspended</option>
                                </select>
                            </div>

                            <!-- Profile Image -->
                            <div class="col-md-6 col-lg-4">
                                <label for="profileImage" class="form-label">Profile Image URL</label>
                                <input type="text" id="profileImage" class="form-control"
                                    placeholder="Enter profile image URL" formControlName="profileImage" />
                            </div>

                            <!-- Role -->
                            <div class="col-md-6 col-lg-4">
                                <label for="roleId" class="form-label">Role</label>
                                <select id="roleId" class="form-select" formControlName="roleId"
                                    (change)="onRoleChange($event)">
                                    <option value="">Select role</option>

                                    <optgroup label="Global Administration">
                                        <option value="r1">Global Admin</option>
                                        <option value="r2">India Manager</option>
                                    </optgroup>

                                    <optgroup label="Regional Management">
                                        <option value="r3">State Manager</option>
                                        <option value="r4">District Manager</option>
                                        <option value="r5">Block Manager</option>
                                        <option value="r5">Field Manager</option>
                                    </optgroup>

                                    <optgroup label="Restaurant Operations">
                                        <option value="r6">Restaurant Owner</option>
                                        <option value="r7">Restaurant Manager</option>
                                        <option value="r8">Chef / Kitchen Head</option>
                                        <option value="r9">Waiter / Service Staff</option>
                                        <option value="r10">Inventory Manager</option>
                                        <option value="r11">Quality Inspector</option>
                                    </optgroup>

                                    <optgroup label="Delivery & Logistics">
                                        <option value="r12">Delivery Partner</option>
                                    </optgroup>

                                    <optgroup label="Support & Back Office">
                                        <option value="r14">Support Executive</option>
                                        <option value="r15">Marketing Manager</option>
                                        <option value="r16">Finance / Accounts</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Restaurant Details (conditional) -->
                            <div class="col-12" *ngIf="registerForm.get('roleId')?.value === 'r6'"
                                formGroupName="restaurant">
                                <div class="card border p-3 mt-3">
                                    <h5 class="mb-3">Restaurant Details</h5>
                                    <div class="row g-3">
                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Restaurant Name</label>
                                            <input class="form-control" formControlName="restaurantName"
                                                placeholder="Enter restaurant name" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Type</label>
                                            <select class="form-select" formControlName="restaurantType">
                                                <option value="">Select Type</option>
                                                <option value="cloud_kitchen">Cloud Kitchen</option>
                                                <option value="cafe">Cafe</option>
                                                <option value="restaurant">Restaurant</option>
                                                <option value="hygienic_cart">Hygienic Cart</option>
                                            </select>
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Full Address</label>
                                            <input class="form-control" formControlName="restaurantAddress"
                                                placeholder="Enter full address" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Pincode</label>
                                            <input class="form-control" formControlName="pincode"
                                                placeholder="Enter pincode" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Latitude</label>
                                            <input class="form-control" formControlName="latitude"
                                                placeholder="Enter latitude" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Longitude</label>
                                            <input class="form-control" formControlName="longitude"
                                                placeholder="Enter longitude" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">FSSAI Number</label>
                                            <input class="form-control" formControlName="fssaiNumber"
                                                placeholder="Enter FSSAI number" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">GST Number</label>
                                            <input class="form-control" formControlName="gstNumber"
                                                placeholder="Enter GST number" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">PAN Number</label>
                                            <input class="form-control" formControlName="panNumber"
                                                placeholder="Enter PAN number" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Registration Date</label>
                                            <input type="date" class="form-control"
                                                formControlName="registrationDate" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Opening Time</label>
                                            <input type="time" class="form-control" formControlName="openingTime" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Closing Time</label>
                                            <input type="time" class="form-control" formControlName="closingTime" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Logo URL</label>
                                            <input class="form-control" formControlName="logoUrl"
                                                placeholder="Enter logo URL" />
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Cover Image URL</label>
                                            <input class="form-control" formControlName="coverImageUrl"
                                                placeholder="Enter cover image URL" />
                                        </div>

                                        <div class="col-12">
                                            <label class="form-label">Description</label>
                                            <textarea class="form-control" formControlName="description" rows="3"
                                                placeholder="Write something..."></textarea>
                                        </div>

                                        <div class="col-md-6 col-lg-4">
                                            <label class="form-label">Is Verified</label>
                                            <select class="form-select" formControlName="isVerified">
                                                <option value="false">No</option>
                                                <option value="true">Yes</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="col-12 d-grid mt-3">
                                <button type="submit" class="btn btn-primary btn-lg w-100"
                                    [disabled]="registerForm.invalid">
                                    Register
                                </button>
                            </div>
                        </div>
                    </form>


                    <p class="text-center mt-3 mb-0">
                        Already have an account? <a href="#">Login here</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>