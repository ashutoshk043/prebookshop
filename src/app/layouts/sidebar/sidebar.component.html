<!-- ✅ Navbar / Header (Hidden on large screens) -->
<nav
  class="navbar navbar-dark px-3 d-lg-none"
  style="background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);"
>
  <div class="d-flex align-items-center justify-content-between w-100">
    <div class="d-flex align-items-center gap-2">
      <div
        class="logo-icon bg-white bg-opacity-25 rounded p-2 d-flex align-items-center justify-content-center"
      >
        <svg width="22" height="22" fill="white" viewBox="0 0 24 24">
          <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"></path>
        </svg>
      </div>
      <span class="navbar-brand mb-0 text-white fw-bold">MyApp</span>
    </div>

    <!-- ✅ Toggle Button (Visible only on mobile) -->
    <button
      class="navbar-toggler border-0"
      type="button"
      (click)="isMobileMenuOpen = !isMobileMenuOpen"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>

<!-- ✅ Sidebar -->
<div
  class="sidebar d-flex flex-column text-white vh-100 position-fixed top-0 start-0 shadow transition-all"
  [ngClass]="{
    collapsed: isCollapsed,
    'translate-start-0': isMobileMenuOpen,
    'translate-start-n100': !isMobileMenuOpen && isMobile
  }"
  style="
    background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
    width: {{ isCollapsed ? '70px' : '240px' }};
    z-index: 1040;
    transition: all 0.3s ease;
  "
>
  <!-- ✅ Desktop Header (Collapse Button) -->
  <div
    class="d-none d-lg-flex align-items-center justify-content-between px-3 py-3 border-bottom border-light-subtle"
  >
    <div class="d-flex align-items-center gap-2 overflow-hidden">
      <div
        class="logo-icon bg-white bg-opacity-25 rounded p-2 d-flex align-items-center justify-content-center"
      >
        <svg width="22" height="22" fill="white" viewBox="0 0 24 24">
          <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"></path>
        </svg>
      </div>
      <span class="fw-bold fs-6" *ngIf="!isCollapsed">MyApp</span>
    </div>

    <button class="btn btn-light btn-sm rounded-circle" (click)="toggleSidebar()">
      <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
        <line x1="3" y1="12" x2="21" y2="12" stroke-width="2"></line>
        <line x1="3" y1="6" x2="21" y2="6" stroke-width="2"></line>
        <line x1="3" y1="18" x2="21" y2="18" stroke-width="2"></line>
      </svg>
    </button>
  </div>

  <!-- ✅ Navigation Menu -->
  <ul class="nav flex-column mt-3 px-2">
    <li *ngFor="let item of menuItems" class="nav-item mb-1">
      <a
        [routerLink]="item.route"
        routerLinkActive="active"
        (click)="onNavClick()"
        [attr.title]="isCollapsed ? item.label : null"
        class="nav-link text-white d-flex align-items-center rounded py-2 px-3"
        style="gap: 10px; transition: all 0.3s ease;"
      >
        <span class="d-flex align-items-center justify-content-center">
          <svg *ngIf="item.icon === 'home'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path>
          </svg>
        </span>
        <span *ngIf="!isCollapsed" class="fw-medium">{{ item.label }}</span>
      </a>
    </li>
  </ul>

  <!-- ✅ Logout -->
  <div class="mt-auto p-3 border-top border-light-subtle">
    <button
      class="btn btn-danger w-100 d-flex align-items-center justify-content-center gap-2"
      (click)="logout()"
    >
      <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
        <path d="M16 13v-2H7V8l-5 4 5 4v-3z"></path>
        <path
          d="M20 3h-8v2h8v14h-8v2h8a2 2 0 0 0 
          2-2V5a2 2 0 0 0-2-2z"
        ></path>
      </svg>
      <span *ngIf="!isCollapsed">Logout</span>
    </button>
  </div>
</div>

<!-- ✅ Mobile Overlay -->
<div
  class="position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-lg-none"
  *ngIf="isMobileMenuOpen"
  (click)="isMobileMenuOpen = false"
  style="z-index: 1030;"
></div>
