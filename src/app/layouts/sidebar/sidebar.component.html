<!-- âœ… Navbar / Header (Hidden on large screens) -->
<nav class="navbar navbar-dark px-3 d-lg-none" style="background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);">
  <div class="d-flex align-items-center justify-content-between w-100">
    <div class="d-flex align-items-center gap-2">
      <div class="logo-icon bg-white bg-opacity-25 rounded p-2 d-flex align-items-center justify-content-center">
        <img src="../../../assets/logo/logo.png" width="40" height="40" alt="logo" />
      </div>
      <span class="navbar-brand mb-0 text-white fw-bold">O4Order.com</span>
    </div>

    <!-- âœ… Toggle Button (Visible only on mobile) -->
    <button class="navbar-toggler border-0" type="button" (click)="isMobileMenuOpen = !isMobileMenuOpen">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>

<!-- âœ… Sidebar -->
<div class="sidebar d-flex flex-column text-white vh-100 position-fixed top-0 start-0 shadow transition-all" [ngClass]="{
    collapsed: isCollapsed,
    'translate-start-0': isMobileMenuOpen,
    'translate-start-n100': !isMobileMenuOpen && isMobile
  }" style="
    background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
    width: {{ isCollapsed ? '70px' : '240px' }};
    z-index: 1040;
    transition: all 0.3s ease;
  ">
  <!-- âœ… Desktop Header (Collapse Button) -->
  <div class="d-none d-lg-flex align-items-center justify-content-between px-3 py-3 border-bottom border-light-subtle">
    <div class="d-flex align-items-center gap-2 overflow-hidden">
      <div class="logo-icon bg-white bg-opacity-25 rounded p-2 d-flex align-items-center justify-content-center">
        <img src="../../../assets/logo/logo.png" width="50" height="50" alt="logo" />
      </div>
      <span class="fw-bold fs-6" *ngIf="!isCollapsed">O4Order.com</span>
    </div>

    <button class="btn btn-light btn-sm rounded-circle" (click)="toggleSidebar()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <line x1="3" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
        <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
        <line x1="3" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
      </svg>
    </button>

  </div>

  <!-- âœ… Navigation Menu -->
  <ul class="nav flex-column mt-3 px-2 sidebar-scroll">

    <li *ngFor="let group of groupedMenu" class="mb-2">

      <!-- ðŸ”½ GROUP HEADER -->
      <div *ngIf="!isCollapsed" (click)="toggleGroup(group.title)"
        class="group-header d-flex align-items-center justify-content-between px-3 py-2 rounded cursor-pointer small"
        [class.group-active]="activeGroup === group.title">

        <span class="text-uppercase fw-bold">
          {{ group.title }}
        </span>

        <span class="transition" [class.rotate-180]="openGroups[group.title]">
          â–¼
        </span>
      </div>

      <!-- ðŸ”¹ GROUP ITEMS -->
      <ul class="nav flex-column group-items" [class.open]="openGroups[group.title]">

        <li *ngFor="let item of group.items" class="nav-item mb-1">

          <a [routerLink]="item.route" routerLinkActive="item-active" (click)="onNavClick(group.title)"
            class="nav-link text-white d-flex align-items-center rounded py-2 px-3" style="gap:12px;">

            <!-- Number -->
            <span class="badge bg-white text-dark rounded-circle d-flex align-items-center justify-content-center"
              style="width:26px;height:26px;font-size:13px;font-weight:600;">
              {{ item.order }}
            </span>

            <!-- Label -->
            <span *ngIf="!isCollapsed" class="fw-medium">
              {{ item.label }}
            </span>

          </a>

        </li>

      </ul>

    </li>

  </ul>

  <!-- âœ… Logout -->
  <div class="mt-auto p-3 border-top border-light-subtle">
    <button class="btn btn-danger w-100 d-flex align-items-center justify-content-center gap-2" (click)="logout()">
      <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
        <path d="M16 13v-2H7V8l-5 4 5 4v-3z"></path>
        <path d="M20 3h-8v2h8v14h-8v2h8a2 2 0 0 0 
          2-2V5a2 2 0 0 0-2-2z"></path>
      </svg>
      <span *ngIf="!isCollapsed">Logout</span>
    </button>
  </div>
</div>

<!-- âœ… Mobile Overlay -->
<div class="position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-lg-none" *ngIf="isMobileMenuOpen"
  (click)="isMobileMenuOpen = false" style="z-index: 1030;"></div>