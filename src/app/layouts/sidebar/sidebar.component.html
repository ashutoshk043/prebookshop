<!-- ✅ Navbar / Header (Hidden on large screens) -->
<nav class="navbar navbar-dark px-3 d-lg-none" style="background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);">
  <div class="d-flex align-items-center justify-content-between w-100">
    <div class="d-flex align-items-center gap-2">
      <div class="logo-icon bg-white bg-opacity-25 rounded p-2 d-flex align-items-center justify-content-center">
        <svg width="22" height="22" fill="white" viewBox="0 0 24 24">
          <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"></path>
        </svg>
      </div>
      <span class="navbar-brand mb-0 text-white fw-bold">Early.com</span>
    </div>

    <!-- ✅ Toggle Button (Visible only on mobile) -->
    <button class="navbar-toggler border-0" type="button" (click)="isMobileMenuOpen = !isMobileMenuOpen">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>

<!-- ✅ Sidebar -->
<div class="sidebar d-flex flex-column text-white vh-100 position-fixed top-0 start-0 shadow transition-all" [ngClass]="{
    collapsed: isCollapsed,
    'translate-start-0': isMobileMenuOpen,
    'translate-start-n100': !isMobileMenuOpen && isMobile
  }" style="
    background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
    width: {{ isCollapsed ? '70px' : '240px' }};
    z-index: 1040;
    transition: all 0.3s ease;
  ">
  <!-- ✅ Desktop Header (Collapse Button) -->
  <div class="d-none d-lg-flex align-items-center justify-content-between px-3 py-3 border-bottom border-light-subtle">
    <div class="d-flex align-items-center gap-2 overflow-hidden">
      <div class="logo-icon bg-white bg-opacity-25 rounded p-2 d-flex align-items-center justify-content-center">
        <svg width="22" height="22" fill="white" viewBox="0 0 24 24">
          <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"></path>
        </svg>
      </div>
      <span class="fw-bold fs-6" *ngIf="!isCollapsed">Early.com</span>
    </div>

    <button class="btn btn-light btn-sm rounded-circle" (click)="toggleSidebar()">
      <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
        <line x1="3" y1="12" x2="21" y2="12" stroke-width="2"></line>
        <line x1="3" y1="6" x2="21" y2="6" stroke-width="2"></line>
        <line x1="3" y1="18" x2="21" y2="18" stroke-width="2"></line>
      </svg>
    </button>
  </div>

  <!-- ✅ Navigation Menu -->
  <ul class="nav flex-column mt-3 px-2">
    <li *ngFor="let item of menuItems" class="nav-item mb-1">
      <a [routerLink]="item.route" routerLinkActive="active" (click)="onNavClick()"
        [attr.title]="isCollapsed ? item.label : null"
        class="nav-link text-white d-flex align-items-center rounded py-2 px-3"
        style="gap: 10px; transition: all 0.3s ease;">
        <span class="d-flex align-items-center justify-content-center">

          <!-- Home Icon -->
          <svg *ngIf="item.icon === 'home'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"></path>
          </svg>

          <!-- Users Icon -->
          <svg *ngIf="item.icon === 'users'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path
              d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0C9.66 11 11 9.66 11 8s-1.34-3-3-3S5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V20h14v-3.5C13 14.17 8.33 13 6 13zm10 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V20h6v-3.5C23 14.17 18.33 13 16 13z" />
          </svg>

          <!-- Orders Icon -->
          <svg *ngIf="item.icon === 'orders'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path
              d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm0-2h14v2H9.42a4 4 0 00-2.42-.84V4h16v10H7v2z" />
          </svg>

          <!-- Products Icon -->
          <svg *ngIf="item.icon === 'products'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path
              d="M21 16V8l-9-5-9 5v8l9 5 9-5zm-9-9.5L18.74 8 12 11.5 5.26 8 12 6.5zm0 12.01l-7-3.89V10.3l7 3.89 7-3.89v4.32l-7 3.89z" />
          </svg>

          <!-- Reports Icon -->
          <svg *ngIf="item.icon === 'reports'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path d="M3 3v18h18V3H3zm8 14H7v-2h4v2zm6-4H7v-2h10v2zm0-4H7V7h10v2z" />
          </svg>

        </span>

        <span *ngIf="!isCollapsed" class="fw-medium">{{ item.label }}</span>
      </a>
    </li>
  </ul>

  <!-- ✅ Logout -->
  <div class="mt-auto p-3 border-top border-light-subtle">
    <button class="btn btn-danger w-100 d-flex align-items-center justify-content-center gap-2" (click)="logout()">
      <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
        <path d="M16 13v-2H7V8l-5 4 5 4v-3z"></path>
        <path d="M20 3h-8v2h8v14h-8v2h8a2 2 0 0 0 
          2-2V5a2 2 0 0 0-2-2z"></path>
      </svg>
      <span *ngIf="!isCollapsed">Logout</span>
    </button>
  </div>
</div>

<!-- ✅ Mobile Overlay -->
<div class="position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-lg-none" *ngIf="isMobileMenuOpen"
  (click)="isMobileMenuOpen = false" style="z-index: 1030;"></div>