<!-- ✅ Navbar / Header (Hidden on large screens) -->
<nav class="navbar navbar-dark px-3 d-lg-none" style="background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);">
  <div class="d-flex align-items-center justify-content-between w-100">
    <div class="d-flex align-items-center gap-2">
      <div class="logo-icon bg-white bg-opacity-25 rounded p-2 d-flex align-items-center justify-content-center">
        <img src="../../../assets/logo/logo2.svg" width="40" height="40" alt="logo" />
      </div>
      <span class="navbar-brand mb-0 text-white fw-bold">TivrCart.com</span>
    </div>

    <!-- ✅ Toggle Button (Visible only on mobile) -->
    <button class="navbar-toggler border-0" type="button" (click)="isMobileMenuOpen = !isMobileMenuOpen">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>

<!-- ✅ Sidebar -->
<div class="sidebar d-flex flex-column text-white vh-100 position-fixed top-0 start-0 shadow transition-all" [ngClass]="{
    collapsed: isCollapsed,
    'translate-start-0': isMobileMenuOpen,
    'translate-start-n100': !isMobileMenuOpen && isMobile
  }" style="
    background: linear-gradient(180deg, #667eea 0%, #764ba2 100%);
    width: {{ isCollapsed ? '70px' : '240px' }};
    z-index: 1040;
    transition: all 0.3s ease;
  ">
  <!-- ✅ Desktop Header (Collapse Button) -->
  <div class="d-none d-lg-flex align-items-center justify-content-between px-3 py-3 border-bottom border-light-subtle">
    <div class="d-flex align-items-center gap-2 overflow-hidden">
      <div class="logo-icon bg-white bg-opacity-25 rounded p-2 d-flex align-items-center justify-content-center">
        <img src="../../../assets/logo/logo2.svg" width="50" height="50" alt="logo" />
      </div>
      <span class="fw-bold fs-6" *ngIf="!isCollapsed">TivrCart.com</span>
    </div>

    <button class="btn btn-light btn-sm rounded-circle" (click)="toggleSidebar()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <line x1="3" y1="6" x2="21" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
        <line x1="3" y1="12" x2="21" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
        <line x1="3" y1="18" x2="21" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"></line>
      </svg>
    </button>

  </div>

  <!-- ✅ Navigation Menu -->
  <ul class="nav flex-column mt-3 px-2">

    <li *ngFor="let item of menuItems" class="nav-item mb-1">
      <a [routerLink]="item.route" routerLinkActive="active" (click)="onNavClick()"
        [attr.title]="isCollapsed ? item.label : null"
        class="nav-link text-white d-flex align-items-center rounded py-2 px-3"
        style="gap: 10px; transition: all 0.3s ease;">

        <span class="d-flex align-items-center justify-content-center">

          <!-- Home -->
          <svg *ngIf="item.icon === 'home'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path d="M12 3L2 12h3v8h6v-6h2v6h6v-8h3z" />
          </svg>

          <!-- Users (people) -->
          <svg *ngIf="item.icon === 'people'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path
              d="M16 11c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3zM8 11c1.66 0 3-1.34 3-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm8 2c-2.33 0-7 1.17-7 3.5V20h14v-3.5c0-2.33-4.67-3.5-7-3.5zM8 13c-2.67 0-8 1.34-8 4v3h8v-3c0-.87.29-1.7.77-2.4C8.62 13.23 8.32 13 8 13z" />
          </svg>

          <!-- Orders (cart) -->
          <svg *ngIf="item.icon === 'cart'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path
              d="M7 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12-2H7l-1-2H1V8h2l3.6 7.59L6.25 17h10.51l3.24-6.45L22 11l-3 5zM17 18c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
          </svg>

          <!-- Products (box) -->
          <svg *ngIf="item.icon === 'box'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path
              d="M21 16V8l-9-5-9 5v8l9 5 9-5zm-9-9.5L18.74 8 12 11.5 5.26 8 12 6.5zm0 12.01l-7-3.89V10.3l7 3.89 7-3.89v4.32l-7 3.89z" />
          </svg>

          <!-- Reports (file-text) -->
          <svg *ngIf="item.icon === 'file-text'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8zm-2 0v6h6" />
            <path d="M8 13h8M8 17h6M8 9h4" />
          </svg>

          <!-- Restaurants (shop) -->
          <svg *ngIf="item.icon === 'shop'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path d="M3 9l1-5h16l1 5H3zm2 2h14v9H5v-9zm3 2v5h2v-5H8z" />
          </svg>

          <!-- Delivery Partners (truck) -->
          <svg *ngIf="item.icon === 'truck'" width="22" height="22" fill="white" viewBox="0 0 24 24">
            <path d="M1 3h15v13H1zM16 8h4l3 5v3h-2a3 3 0 11-6 0H9a3 3 0 11-6 0H1" />
          </svg>

        </span>

        <span *ngIf="!isCollapsed" class="fw-medium">{{ item.label }}</span>

      </a>
    </li>

  </ul>


  <!-- ✅ Logout -->
  <div class="mt-auto p-3 border-top border-light-subtle">
    <button class="btn btn-danger w-100 d-flex align-items-center justify-content-center gap-2" (click)="logout()">
      <svg width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
        <path d="M16 13v-2H7V8l-5 4 5 4v-3z"></path>
        <path d="M20 3h-8v2h8v14h-8v2h8a2 2 0 0 0 
          2-2V5a2 2 0 0 0-2-2z"></path>
      </svg>
      <span *ngIf="!isCollapsed">Logout</span>
    </button>
  </div>
</div>

<!-- ✅ Mobile Overlay -->
<div class="position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-lg-none" *ngIf="isMobileMenuOpen"
  (click)="isMobileMenuOpen = false" style="z-index: 1030;"></div>